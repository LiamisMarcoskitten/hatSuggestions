<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>StreetFit AI — Hat Style Scanner</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: #0d0d0d;
            color: #ffffff;
        }

        header {
            padding: 20px;
            text-align: center;
            font-size: 32px;
            font-weight: 600;
            background: #111;
            border-bottom: 1px solid #222;
        }

        .container {
            max-width: 1100px;
            margin: auto;
            padding: 30px;
        }

        .card {
            background: #151515;
            border: 1px solid #2a2a2a;
            border-radius: 14px;
            padding: 20px;
            margin-bottom: 25px;
        }

        h2 {
            margin-top: 0;
        }

        button {
            background: #ff3c38;
            color: white;
            border: none;
            padding: 12px 22px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 15px;
        }

        button:hover {
            background: #e6322e;
        }

        #webcam-container {
            margin-top: 15px;
        }

        #label-container div {
            background: #0f0f0f;
            border: 1px solid #333;
            padding: 8px;
            border-radius: 6px;
            margin-top: 6px;
            font-size: 14px;
        }

        #suggestions {
            margin-top: 20px;
            background: #101010;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #333;
        }

        footer {
            text-align: center;
            padding: 15px;
            font-size: 14px;
            color: #777;
        }
    </style>
</head>

<body>

<header>StreetFit AI — Hat Style Scanner</header>

<div class="container">

    <!-- PROJECT EXPLANATION -->
    <div class="card">
        <h2>What Problem Does This Solve?</h2>
        <p>
            Many people struggle to find hats that match their personal style when shopping online.
            StreetFit AI solves this by instantly recognizing the type of hat you're wearing and
            recommending similar styles you might like.
        </p>
        <p>
            This tool is useful for streetwear fans, online shoppers, and fashion brands looking
            to offer personalized shopping experiences.
        </p>
    </div>

    <!-- INSTRUCTIONS -->
    <div class="card">
        <h2>How to Use</h2>
        <ol>
            <li>Click the <strong>Start</strong> button to enable your webcam.</li>
            <li>Wear a hat (or no hat) and face the camera.</li>
            <li>The AI will detect your hat type and suggest similar styles.</li>
        </ol>

        <button onclick="init()">Start</button>

        <div id="webcam-container"></div>
        <div id="label-container"></div>

        <div id="suggestions">
            <h3>Style Suggestions</h3>
            <p>Your recommendations will appear here.</p>
        </div>
    </div>

</div>

<footer>© 2025 StreetFit AI — Smart Style Meets Streetwear</footer>

<!-- SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<script>
    const URL = "./my_model/";
    let model, webcam, labelContainer, maxPredictions;

    const suggestionsMap = {
        "baseball cap": "You’re rocking a classic streetwear look. You might also like snapbacks, logo caps, or flat-brim urban hats.",
        "beanie": "Clean and casual. Try cuffed beanies, oversized knit beanies, or minimalist winter styles.",
        "cowboy hat": "Bold choice. You may also like western-inspired hats or wide-brim statement pieces.",
        "bucket hat": "Trendy and relaxed. Similar styles include fisherman hats and lightweight summer street hats.",
        "no hat": "No hat detected. Throw one on to unlock streetwear-inspired recommendations!"
    };

    async function init() {
        const modelURL = URL + "model.json";
        const metadataURL = URL + "metadata.json";

        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();

        webcam = new tmImage.Webcam(200, 200, true);
        await webcam.setup();
        await webcam.play();
        window.requestAnimationFrame(loop);

        document.getElementById("webcam-container").appendChild(webcam.canvas);

        labelContainer = document.getElementById("label-container");
        labelContainer.innerHTML = "";
        for (let i = 0; i < maxPredictions; i++) {
            labelContainer.appendChild(document.createElement("div"));
        }
    }

    async function loop() {
        webcam.update();
        await predict();
        window.requestAnimationFrame(loop);
    }

    async function predict() {
        const predictions = await model.predict(webcam.canvas);

        let bestClass = "";
        let bestProb = 0;

        for (let i = 0; i < predictions.length; i++) {
            const p = predictions[i];
            labelContainer.childNodes[i].innerHTML =
                `${p.className}: ${p.probability.toFixed(2)}`;

            if (p.probability > bestProb) {
                bestProb = p.probability;
                bestClass = p.className;
            }
        }

        document.getElementById("suggestions").innerHTML = `
            <h3>Style Suggestions</h3>
            <p>${suggestionsMap[bestClass] || "Try adjusting your position or lighting."}</p>
        `;
    }
</script>

</body>
</html>
